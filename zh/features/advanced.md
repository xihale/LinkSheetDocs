# 高级与系统

对于高级用户，LinkSheet 提供深度系统集成和开发者工具。

## Shizuku 集成

LinkSheet 使用 [Shizuku](https://shizuku.rikka.app/) 在没有 Root 权限的情况下执行系统级操作。

* **管理应用链接：**
  * 允许你一次性**批量启用或禁用**多个应用的"打开支持的链接"设置。
  * 这比手动进入每个应用的系统设置页面去撤销链接处理权限要快得多。
* **重置验证：**
  * **目的：** 强制 Android 重新验证应用链接（Intent Filters）。
  * **场景：** 当应用关联卡住、损坏，或者你安装了一个新应用但它没有正确捕获链接时非常有用。
* **要求：** 已安装 Shizuku 应用并正在运行服务（通过 Root 或无线调试）。

## 下载器 🌐

* **启用：** 在底部栏添加"下载"按钮。
* **MIME 类型检测 🌐 [影响：低]：** 通过向服务器发送 HEAD 请求，自动从 URL 检测文件类型（例如 `.jpg`, `.pdf`）。

## 多用户与分身 (Profiles)

LinkSheet 支持 Android 的多用户和工作资料 (Work Profile) 功能。

* **个人/工作切换：** 在选择应用处理链接时，可以在个人和工作资料之间无缝切换。
* **应用检测：** 自动检测安装在不同资料中的应用，并在选择页面中展示它们。

## 域名排除

微调 LinkSheet 处理特定域名的方式。

* **排除列表：** 你可以指定应从某些处理逻辑（如重定向解析或追踪保护）中排除的域名，以确保与复杂的 Web 应用兼容。

## 导入 / 导出

备份你的配置或将其传输到另一台设备。

* **导出：** 将设置、首选应用和规则保存到 JSON 文件。
  * *选项：* 包含历史记录，包含日志哈希密钥。
* **导入：** 从文件恢复设置。注意，这将覆盖当前设置。

## 日志与调试

* **日志查看器：** 查看内部应用日志以诊断问题。
* **脱敏：** 导出的日志可以自动脱敏，在分享前移除敏感信息，如确切的 URL 和包名。
* **崩溃日志：** 包含崩溃报告堆栈跟踪的选项。

## 功能标志与实验

访问"实验"部分以尝试仍在开发中的前沿功能。这些功能分为以下几组：

### 改进型底部栏

* **LibRedirect QuickJS 引擎：** 使用 QuickJS JavaScript 引擎来执行 LibRedirect 规则。
  * *默认：* 使用 **原生 Kotlin 实现**。Kotlin 版本更轻量且速度更快，但可能无法支持所有需要实际 JavaScript 执行的复杂重定向规则。
* **忽略动画时的误触：** 防止底部栏正在动画时发生意外点击。
* **手动解析重定向：** 添加手动触发重定向解析的控件。
* **禁用状态保存：** 防止底部栏在多次打开之间记住其状态。
* **激进跟随重定向：** 尝试在可疑或复杂的 URL 模式上依然强制跟随重定向。

### 系统与逻辑

* **链接引擎：** 用于匹配和处理链接的新版核心引擎。
* **新版验证链接处理程序页面：** 重新设计的验证链接处理程序管理界面。
* **禁用日志持久化：** 停止将内部日志保存到设备存储中，以节省 IO 和空间。

*注意：这些功能可能不稳定，经常更改，或者在测试完成后移至稳定设置。*
